<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stream Player</title>
    <script src="https://content.jwplatform.com/libraries/IDzF9Zmk.js"></script>
    <style>
        body { margin: 0; padding: 20px; background: #000; color: #fff; font-family: Arial, sans-serif; }
        #player { width: 100%; max-width: 800px; margin: 0 auto; }
        .error { color: red; text-align: center; margin-top: 10px; }
    </style>
</head>
<body>
    <div id="player">Loading the player...</div>
    <div id="error" class="error"></div>
    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const streamId = urlParams.get('play') || '369'; // Default to 369
        const streamUrl = `/api/proxy?id=${streamId}`;
        const errorDiv = document.getElementById('error');
        jwplayer('player').setup({
            file: streamUrl,
            width: '100%',
            height: '400px',
            autostart: false,
            controls: true
        }).on('error', (e) => {
            errorDiv.textContent = 'Error loading stream: ' + (e.message || 'Unknown error');
        }).on('ready', () => {
            errorDiv.textContent = '';
        });
    </script>
</body>
</html>
